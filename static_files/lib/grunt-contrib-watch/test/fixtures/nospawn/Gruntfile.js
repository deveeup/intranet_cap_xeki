module.exports=function(e){"use strict";var s=require("http");e.initConfig({watch:{nospawn:{files:["lib/nospawn.js"],tasks:["server"],options:{nospawn:!0}},spawn:{files:["lib/spawn.js"],tasks:["server"]},interrupt:{files:["lib/interrupt.js"],tasks:["long","long","long"],options:{nospawn:!0,interrupt:!0}}}}),e.loadTasks("../../../tasks");var t;e.registerTask("server",function(){if(t){var n=this.async();s.request({port:1337},function(s){s.on("data",function(s){e.log.writeln(s),n()})}).end()}else t=s.createServer(function(e,s){s.writeHead(200,{"Content-Type":"text/plain"}),s.end("Server is talking!")}).listen(1337),e.log.writeln("Server is listening...")}),e.registerTask("long",function(){setTimeout(this.async(),2e3)}),e.registerTask("default",["server","watch"])};