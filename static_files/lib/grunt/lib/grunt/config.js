"use strict";var grunt=require("../grunt"),config=module.exports=function(n,r){return 2===arguments.length?config.set(n,r):config.get(n)};config.data={},config.escape=function(n){return n.replace(/\./g,"\\.")},config.getPropString=function(n){return Array.isArray(n)?n.map(config.escape).join("."):n},config.getRaw=function(n){return n?grunt.util.namespace.get(config.data,config.getPropString(n)):config.data};var propStringTmplRe=/^<%=\s*([a-z0-9_$]+(?:\.[a-z0-9_$]+)*)\s*%>$/i;config.get=function(n){return config.process(config.getRaw(n))},config.process=function(n){return grunt.util.recurse(n,function(n){if("string"!=typeof n)return n;var r,t=n.match(propStringTmplRe);return t&&null!=(r=config.get(t[1]))?r:grunt.template.process(n,{data:config.data})})},config.set=function(n,r){return grunt.util.namespace.set(config.data,config.getPropString(n),r)},config.merge=function(n){return grunt.util._.merge(config.data,n),config.data},config.init=function(n){return grunt.verbose.write("Initializing config...").ok(),config.data=n||{}},config.requires=function(){var n=grunt.util.pluralize,r=grunt.util.toArray(arguments).map(config.getPropString),t="Verifying propert"+n(r.length,"y/ies")+" "+grunt.log.wordlist(r)+" exist"+n(r.length,"s")+" in config...";grunt.verbose.write(t);var i=config.data&&r.filter(function(n){return null==config.get(n)}).map(function(n){return'"'+n+'"'});if(config.data&&0===i.length)return grunt.verbose.ok(),!0;throw grunt.verbose.or.write(t),grunt.log.error().error("Unable to process task."),config.data?grunt.util.error("Required config propert"+n(i.length,"y/ies")+" "+i.join(", ")+" missing."):grunt.util.error("Unable to load config.")};