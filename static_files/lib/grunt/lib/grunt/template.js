"use strict";var grunt=require("../grunt"),template=module.exports={};template.date=require("dateformat"),template.today=function(e){return template.date(new Date,e)};var allDelimiters={};template.addDelimiters=function(e,t,r){var a=allDelimiters[e]={};a.opener=t,a.closer=r;var n=a.opener.replace(/(.)/g,"\\$1"),l="([\\s\\S]+?)"+a.closer.replace(/(.)/g,"\\$1");a.lodash={evaluate:new RegExp(n+l,"g"),interpolate:new RegExp(n+"="+l,"g"),escape:new RegExp(n+"-"+l,"g")}},template.addDelimiters("config","<%","%>"),template.setDelimiters=function(e){var t=allDelimiters[e in allDelimiters?e:"config"];return grunt.util._.templateSettings=t.lodash,t},template.process=function(e,t){t||(t={});var r=template.setDelimiters(t.delimiters),a=Object.create(t.data||grunt.config.data||{});"grunt"in a||(a.grunt=grunt);var n=e;try{for(;e.indexOf(r.opener)>=0&&(e=grunt.util._.template(e,a))!==n;)n=e}catch(t){"SyntaxError: Unexpected token ILLEGAL"===String(t)&&/\n|\r/.test(e)&&grunt.log.errorlns("A special character was detected in this template. Inside template tags, the \\n and \\r special characters must be escaped as \\\\n and \\\\r. (grunt 0.4.0+)"),t.message="An error occurred while processing a template ("+t.message+").",grunt.warn(t,grunt.fail.code.TEMPLATE_ERROR)}return grunt.util.normalizelf(e)};