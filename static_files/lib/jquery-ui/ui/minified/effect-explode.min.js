!function(e){"function"==typeof define&&define.amd?define(["jquery","./effect"],e):e(jQuery)}(function(e){return e.effects.effect.explode=function(i,t){function o(){p.css({visibility:"visible"}),e(b).remove(),u||p.hide(),t()}var s,f,n,d,c,a,h=i.pieces?Math.round(Math.sqrt(i.pieces)):3,l=h,p=e(this),u="show"===e.effects.setMode(p,i.mode||"hide"),r=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/l),y=Math.ceil(p.outerHeight()/h),b=[];for(s=0;h>s;s++)for(d=r.top+s*y,a=s-(h-1)/2,f=0;l>f;f++)n=r.left+f*v,c=f-(l-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-f*v,top:-s*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:n+(u?c*v:0),top:d+(u?a*y:0),opacity:u?0:1}).animate({left:n+(u?0:c*v),top:d+(u?0:a*y),opacity:u?1:0},i.duration||500,i.easing,function(){b.push(this),b.length===h*l&&o()})}});