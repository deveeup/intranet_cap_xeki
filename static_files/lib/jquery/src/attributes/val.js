define(["../core","./support","../core/init"],function(e,t){var n=/\r/g;e.fn.extend({val:function(t){var o,i,r,a=this[0];return arguments.length?(r=e.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,e(this).val()):t)?i="":"number"==typeof i?i+="":e.isArray(i)&&(i=e.map(i,function(e){return null==e?"":e+""})),(o=e.valHooks[this.type]||e.valHooks[this.nodeName.toLowerCase()])&&"set"in o&&void 0!==o.set(this,i,"value")||(this.value=i))})):a?(o=e.valHooks[a.type]||e.valHooks[a.nodeName.toLowerCase()])&&"get"in o&&void 0!==(i=o.get(a,"value"))?i:"string"==typeof(i=a.value)?i.replace(n,""):null==i?"":i:void 0}}),e.extend({valHooks:{option:{get:function(t){var n=e.find.attr(t,"value");return null!=n?n:e.trim(e.text(t))}},select:{get:function(n){for(var o,i,r=n.options,a=n.selectedIndex,l="select-one"===n.type||0>a,s=l?null:[],u=l?a+1:r.length,c=0>a?u:l?a:0;u>c;c++)if(((i=r[c]).selected||c===a)&&(t.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!e.nodeName(i.parentNode,"optgroup"))){if(o=e(i).val(),l)return o;s.push(o)}return s},set:function(t,n){for(var o,i,r=t.options,a=e.makeArray(n),l=r.length;l--;)i=r[l],(i.selected=e.inArray(i.value,a)>=0)&&(o=!0);return o||(t.selectedIndex=-1),a}}}}),e.each(["radio","checkbox"],function(){e.valHooks[this]={set:function(t,n){return e.isArray(n)?t.checked=e.inArray(e(t).val(),n)>=0:void 0}},t.checkOn||(e.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})});