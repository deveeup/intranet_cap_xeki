describe("Drawing HTML overlays",function(){var e,t;beforeEach(function(){e=e||new GMaps({el:"#map-with-overlays",lat:-12.0433,lng:-77.0283,zoom:12}),t=t||e.drawOverlay({lat:e.getCenter().lat(),lng:e.getCenter().lng(),layer:"overlayLayer",content:'<div class="overlay">Lima</div>',verticalAlign:"top",horizontalAlign:"center"})}),it("should add the overlay to the overlays collection",function(){expect(e.overlays.length).toEqual(1),expect(e.overlays[0]).toEqual(t)}),it("should add the overlay in the current map",function(){expect(t.getMap()).toEqual(e.map)}),describe("With events",function(){var t,n;beforeEach(function(){t={onclick:function(){console.log("Clicked the overlay")}},spyOn(t,"onclick").andCallThrough(),n=e.drawOverlay({lat:e.getCenter().lat(),lng:e.getCenter().lng(),content:"<p>Clickable overlay</p>",click:t.onclick})}),it("should respond to click event",function(){var e=!1;google.maps.event.addListenerOnce(n,"ready",function(){e=!0}),waitsFor(function(){return e},"the overlay's DOM element to be ready",1e4),runs(function(){google.maps.event.trigger(n.el,"click"),expect(t.onclick).toHaveBeenCalled()})})})});